#!/usr/bin/env node
const yargs = require("yargs");
const { hideBin } = require("yargs/helpers");
const server  = require("../build/server");

const main = async () => {
	const argv = await yargs(hideBin(process.argv))
		.option("server", {
			describe: "Tunnel server url to connect",
			demandOption: true,
			type: "string",
			default: "http://pranavs.tech"
		})
		.option("hostname", {
			describe: "local hostname",
			demandOption: true,
			type: "string",
			default: "127.0.0.1"
		})
		.option("port", {
			describe: "Specify the port",
			demandOption: true,
			type: "number"
		})
		.parse();

	const options = {
		server: argv.server,
		port: argv.port,
		hostname: argv.hostname
	};
	server.default(options);
};

main();
